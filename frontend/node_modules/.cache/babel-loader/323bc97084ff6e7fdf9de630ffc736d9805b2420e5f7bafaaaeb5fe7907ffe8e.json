{"ast":null,"code":"// frontend/src/components/MapView.jsx\nimport React from\"react\";import{MapContainer,TileLayer,Marker,Popup,Polyline}from\"react-leaflet\";import L from\"leaflet\";import\"leaflet/dist/leaflet.css\";import markerIcon2x from'leaflet/dist/images/marker-icon-2x.png';import markerIcon from'leaflet/dist/images/marker-icon.png';import markerShadow from'leaflet/dist/images/marker-shadow.png';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";delete L.Icon.Default.prototype._getIconUrl;L.Icon.Default.mergeOptions({iconRetinaUrl:markerIcon2x,iconUrl:markerIcon,shadowUrl:markerShadow});const BettiahCenter=[26.8138,84.5154];export default function MapView(_ref){let{markers=[],height=\"500px\",route=null,onMarkerClick}=_ref;// route: GeoJSON feature (with geometry.coordinates [ [lon,lat],... ])\nconst polylinePositions=route&&route.geometry?route.geometry.coordinates.map(c=>[c[1],c[0]]):null;return/*#__PURE__*/_jsx(\"div\",{className:\"map-container\",style:{height},children:/*#__PURE__*/_jsxs(MapContainer,{center:BettiahCenter,zoom:13,style:{height:\"100%\",width:\"100%\"},children:[/*#__PURE__*/_jsx(TileLayer,{attribution:\"\\xA9 OpenStreetMap contributors\",url:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"}),markers.map(m=>/*#__PURE__*/_jsx(Marker,{position:[m.lat,m.lng],eventHandlers:{click:()=>{if(onMarkerClick)onMarkerClick(m);}},children:/*#__PURE__*/_jsx(Popup,{children:/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:280},children:[/*#__PURE__*/_jsx(\"strong\",{children:m.title}),m.desc&&/*#__PURE__*/_jsx(\"p\",{style:{margin:'6px 0'},children:m.desc.length>140?m.desc.slice(0,140)+\"...\":m.desc}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0},children:/*#__PURE__*/_jsxs(\"small\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Author:\"}),\" \",m.author||\"unknown\"]})}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0},children:/*#__PURE__*/_jsxs(\"small\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Assigned:\"}),\" \",m.assignedName||m.assignedTo||\"—\"]})}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:8},children:/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:e=>{e.stopPropagation();if(onMarkerClick)onMarkerClick(m);},children:\"Open\"})})]})})},m.id)),polylinePositions&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Marker,{position:polylinePositions[0],children:/*#__PURE__*/_jsx(Popup,{children:/*#__PURE__*/_jsx(\"small\",{children:\"Start\"})})}),/*#__PURE__*/_jsx(Marker,{position:polylinePositions[polylinePositions.length-1],children:/*#__PURE__*/_jsx(Popup,{children:/*#__PURE__*/_jsx(\"small\",{children:\"Destination\"})})}),/*#__PURE__*/_jsx(Polyline,{positions:polylinePositions,pathOptions:{color:\"#2ecc71\",weight:5,dashArray:\"8 6\",opacity:0.9}})]})]})});}","map":{"version":3,"names":["React","MapContainer","TileLayer","Marker","Popup","Polyline","L","markerIcon2x","markerIcon","markerShadow","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","BettiahCenter","MapView","_ref","markers","height","route","onMarkerClick","polylinePositions","geometry","coordinates","map","c","className","style","children","center","zoom","width","attribution","url","m","position","lat","lng","eventHandlers","click","maxWidth","title","desc","margin","length","slice","author","assignedName","assignedTo","marginTop","onClick","e","stopPropagation","id","positions","pathOptions","color","weight","dashArray","opacity"],"sources":["/Users/devanshgoenka/Desktop/seva/frontend/src/components/MapView.jsx"],"sourcesContent":["// frontend/src/components/MapView.jsx\nimport React from \"react\";\nimport { MapContainer, TileLayer, Marker, Popup, Polyline } from \"react-leaflet\";\nimport L from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\";\n\nimport markerIcon2x from 'leaflet/dist/images/marker-icon-2x.png';\nimport markerIcon from 'leaflet/dist/images/marker-icon.png';\nimport markerShadow from 'leaflet/dist/images/marker-shadow.png';\n\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: markerIcon2x,\n  iconUrl: markerIcon,\n  shadowUrl: markerShadow,\n});\n\nconst BettiahCenter = [26.8138, 84.5154];\n\nexport default function MapView({ markers = [], height = \"500px\", route = null, onMarkerClick }) {\n  // route: GeoJSON feature (with geometry.coordinates [ [lon,lat],... ])\n  const polylinePositions = route && route.geometry ? route.geometry.coordinates.map(c => [c[1], c[0]]) : null;\n\n  return (\n    <div className=\"map-container\" style={{ height }}>\n      <MapContainer center={BettiahCenter} zoom={13} style={{ height: \"100%\", width: \"100%\" }}>\n        <TileLayer\n          attribution='&copy; OpenStreetMap contributors'\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        />\n\n        {markers.map(m => (\n          <Marker key={m.id} position={[m.lat, m.lng]} eventHandlers={{\n            click: () => { if(onMarkerClick) onMarkerClick(m); }\n          }}>\n            <Popup>\n              <div style={{maxWidth:280}}>\n                <strong>{m.title}</strong>\n                {m.desc && <p style={{margin:'6px 0'}}>{m.desc.length>140 ? m.desc.slice(0,140)+\"...\" : m.desc}</p>}\n                <p style={{margin:0}}><small><b>Author:</b> {m.author || \"unknown\"}</small></p>\n                <p style={{margin:0}}><small><b>Assigned:</b> {m.assignedName || m.assignedTo || \"—\"}</small></p>\n                <div style={{marginTop:8}}>\n                  <button className=\"btn\" onClick={(e)=>{ e.stopPropagation(); if(onMarkerClick) onMarkerClick(m); }}>Open</button>\n                </div>\n              </div>\n            </Popup>\n          </Marker>\n        ))}\n\n        {polylinePositions && (\n          <>\n            {/* start marker */}\n            <Marker position={polylinePositions[0]}>\n              <Popup><small>Start</small></Popup>\n            </Marker>\n            {/* end marker */}\n            <Marker position={polylinePositions[polylinePositions.length - 1]}>\n              <Popup><small>Destination</small></Popup>\n            </Marker>\n\n            {/* green dotted line */}\n            <Polyline\n              positions={polylinePositions}\n              pathOptions={{\n                color: \"#2ecc71\",\n                weight: 5,\n                dashArray: \"8 6\",\n                opacity: 0.9\n              }}\n            />\n          </>\n        )}\n      </MapContainer>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}