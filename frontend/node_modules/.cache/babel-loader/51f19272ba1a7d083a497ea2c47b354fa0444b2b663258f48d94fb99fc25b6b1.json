{"ast":null,"code":"// src/App.jsx\nimport React,{useState,useEffect}from\"react\";import{Routes,Route,useNavigate}from\"react-router-dom\";import Landing from\"./pages/Landing\";import Login from\"./pages/Login\";import Signup from\"./pages/Signup\";import DashboardUser from\"./components/DashboardUser\";import DashboardAdmin from\"./components/DashboardAdmin\";import DashboardAuthority from\"./components/DashboardAuthority\";import Navbar from\"./components/Navbar\";import AuthoritiesList from\"./components/AuthoritiesList\";import Footer from\"./components/Footer\";import LoadingSplash from\"./components/LoadingSplash\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[user,setUser]=useState(()=>{const raw=localStorage.getItem(\"seva_user\");return raw?JSON.parse(raw):null;});const[bootLoading,setBootLoading]=useState(true);const navigate=useNavigate();useEffect(()=>{// small splash delay\nconst t=setTimeout(()=>setBootLoading(false),1000);return()=>clearTimeout(t);},[]);useEffect(()=>{if(!user){// stay on landing unless logged in\n}},[user]);function handleLogin(u){setUser(u);localStorage.setItem(\"seva_user\",JSON.stringify(u));if(u.role===\"admin\")navigate(\"/admin\");else if(u.role===\"authority\")navigate(\"/authority\");else navigate(\"/user\");}function handleLogout(){const role=user===null||user===void 0?void 0:user.role;localStorage.removeItem(\"seva_user\");setUser(null);if(role===\"admin\"){alert(\"Thank you, boss\");}else{alert(\"Dhanyavad\");}navigate(\"/\");}// show splash on first load\nif(bootLoading){return/*#__PURE__*/_jsx(LoadingSplash,{});}return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsx(Navbar,{user:user,onLogout:handleLogout}),/*#__PURE__*/_jsx(\"main\",{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Landing,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{onLogin:handleLogin})}),/*#__PURE__*/_jsx(Route,{path:\"/signup\",element:/*#__PURE__*/_jsx(Signup,{onSignup:handleLogin})}),/*#__PURE__*/_jsx(Route,{path:\"/authorities\",element:/*#__PURE__*/_jsx(AuthoritiesList,{})}),/*#__PURE__*/_jsx(Route,{path:\"/user\",element:/*#__PURE__*/_jsx(DashboardUser,{user:user})}),/*#__PURE__*/_jsx(Route,{path:\"/admin\",element:/*#__PURE__*/_jsx(DashboardAdmin,{user:user})}),/*#__PURE__*/_jsx(Route,{path:\"/authority\",element:/*#__PURE__*/_jsx(DashboardAuthority,{user:user})})]})}),/*#__PURE__*/_jsx(Footer,{})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","Routes","Route","useNavigate","Landing","Login","Signup","DashboardUser","DashboardAdmin","DashboardAuthority","Navbar","AuthoritiesList","Footer","LoadingSplash","jsx","_jsx","jsxs","_jsxs","App","user","setUser","raw","localStorage","getItem","JSON","parse","bootLoading","setBootLoading","navigate","t","setTimeout","clearTimeout","handleLogin","u","setItem","stringify","role","handleLogout","removeItem","alert","className","children","onLogout","path","element","onLogin","onSignup"],"sources":["/Users/devanshgoenka/Desktop/seva/frontend/src/App.jsx"],"sourcesContent":["// src/App.jsx\nimport React, { useState, useEffect } from \"react\";\nimport { Routes, Route, useNavigate } from \"react-router-dom\";\nimport Landing from \"./pages/Landing\";\nimport Login from \"./pages/Login\";\nimport Signup from \"./pages/Signup\";\nimport DashboardUser from \"./components/DashboardUser\";\nimport DashboardAdmin from \"./components/DashboardAdmin\";\nimport DashboardAuthority from \"./components/DashboardAuthority\";\nimport Navbar from \"./components/Navbar\";\nimport AuthoritiesList from \"./components/AuthoritiesList\";\nimport Footer from \"./components/Footer\";\nimport LoadingSplash from \"./components/LoadingSplash\";\n\nfunction App() {\n  const [user, setUser] = useState(() => {\n    const raw = localStorage.getItem(\"seva_user\");\n    return raw ? JSON.parse(raw) : null;\n  });\n  const [bootLoading, setBootLoading] = useState(true);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    // small splash delay\n    const t = setTimeout(() => setBootLoading(false), 1000);\n    return () => clearTimeout(t);\n  }, []);\n\n  useEffect(() => {\n    if (!user) {\n      // stay on landing unless logged in\n    }\n  }, [user]);\n\n  function handleLogin(u) {\n    setUser(u);\n    localStorage.setItem(\"seva_user\", JSON.stringify(u));\n    if (u.role === \"admin\") navigate(\"/admin\");\n    else if (u.role === \"authority\") navigate(\"/authority\");\n    else navigate(\"/user\");\n  }\n\n  function handleLogout() {\n    const role = user?.role;\n    localStorage.removeItem(\"seva_user\");\n    setUser(null);\n    if (role === \"admin\") {\n      alert(\"Thank you, boss\");\n    } else {\n      alert(\"Dhanyavad\");\n    }\n    navigate(\"/\");\n  }\n\n  // show splash on first load\n  if (bootLoading) {\n    return <LoadingSplash />;\n  }\n\n  return (\n    <div className=\"app\">\n      <Navbar user={user} onLogout={handleLogout} />\n      <main>\n        <Routes>\n          <Route path=\"/\" element={<Landing />} />\n          <Route path=\"/login\" element={<Login onLogin={handleLogin} />} />\n          <Route path=\"/signup\" element={<Signup onSignup={handleLogin} />} />\n          <Route path=\"/authorities\" element={<AuthoritiesList />} />\n          <Route path=\"/user\" element={<DashboardUser user={user} />} />\n          <Route path=\"/admin\" element={<DashboardAdmin user={user} />} />\n          <Route\n            path=\"/authority\"\n            element={<DashboardAuthority user={user} />}\n          />\n        </Routes>\n      </main>\n      <Footer />\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}