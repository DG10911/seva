{"ast":null,"code":"// src/api/api.js\nconst BASE = process.env.REACT_APP_API_BASE || \"\";\nasync function request(path, opts = {}) {\n  const url = `${BASE}${path}`;\n  const res = await fetch(url, {\n    headers: {\n      \"Content-Type\": \"application/json\",\n      ...opts.headers\n    },\n    ...opts\n  });\n  if (!res.ok) {\n    const text = await res.text().catch(() => \"\");\n    let err = new Error(`API error ${res.status} ${res.statusText}`);\n    err.status = res.status;\n    err.body = text;\n    throw err;\n  }\n  if (res.status === 204) return null;\n  const data = await res.json().catch(() => null);\n  return data;\n}\n\n/* AUTH */\nexport async function login({\n  username,\n  password,\n  role\n}) {\n  return request(`/auth/login`, {\n    method: \"POST\",\n    body: JSON.stringify({\n      username,\n      password,\n      role\n    })\n  });\n}\nexport async function signup({\n  username,\n  password,\n  role\n}) {\n  return request(`/auth/signup`, {\n    method: \"POST\",\n    body: JSON.stringify({\n      username,\n      password,\n      role\n    })\n  });\n}\n\n/* AUTHORITIES */\nexport async function getAuthorities() {\n  return request(`/authorities`);\n}\nexport async function getAuthorityById(id) {\n  return request(`/authorities/${encodeURIComponent(id)}`);\n}\n\n/* REPORTS */\nexport async function getReports() {\n  return request(`/reports`);\n}\nexport async function getReport(id) {\n  return request(`/reports/${encodeURIComponent(id)}`);\n}\nexport async function createReport(report) {\n  return request(`/reports`, {\n    method: \"POST\",\n    body: JSON.stringify(report)\n  });\n}\nexport async function updateReport(id, patch) {\n  return request(`/reports/${encodeURIComponent(id)}`, {\n    method: \"PATCH\",\n    body: JSON.stringify(patch)\n  });\n}\nexport async function deleteReport(id) {\n  return request(`/reports/${encodeURIComponent(id)}`, {\n    method: \"DELETE\"\n  });\n}\n\n/* VOTES & COMMENTS (server endpoints) */\nexport async function voteReport(id) {\n  return request(`/reports/${encodeURIComponent(id)}/vote`, {\n    method: \"POST\"\n  });\n}\nexport async function completeVoteReport(id) {\n  return request(`/reports/${encodeURIComponent(id)}/complete-vote`, {\n    method: \"POST\"\n  });\n}\nexport async function commentReport(id, comment) {\n  return request(`/reports/${encodeURIComponent(id)}/comment`, {\n    method: \"POST\",\n    body: JSON.stringify(comment)\n  });\n}\n\n/* ADMIN: user & authority management (if backend implements) */\nexport async function getUsers() {\n  return request(`/users`);\n}\nexport async function updateUser(id, patch) {\n  return request(`/users/${encodeURIComponent(id)}`, {\n    method: \"PATCH\",\n    body: JSON.stringify(patch)\n  });\n}\nexport async function getOnlineUsers() {\n  return request(`/users/online`);\n}\n\n/* ORS proxy (optional) */\nexport async function getRouteGeoJSON(coordinates, profile = \"driving-car\") {\n  return request(`/ors/route`, {\n    method: \"POST\",\n    body: JSON.stringify({\n      coordinates,\n      profile\n    })\n  });\n}\nexport default {\n  login,\n  signup,\n  getAuthorities,\n  getReports,\n  getReport,\n  createReport,\n  updateReport,\n  voteReport,\n  completeVoteReport,\n  commentReport,\n  getUsers,\n  updateUser,\n  getOnlineUsers,\n  getRouteGeoJSON\n};","map":{"version":3,"names":["BASE","process","env","REACT_APP_API_BASE","request","path","opts","url","res","fetch","headers","ok","text","catch","err","Error","status","statusText","body","data","json","login","username","password","role","method","JSON","stringify","signup","getAuthorities","getAuthorityById","id","encodeURIComponent","getReports","getReport","createReport","report","updateReport","patch","deleteReport","voteReport","completeVoteReport","commentReport","comment","getUsers","updateUser","getOnlineUsers","getRouteGeoJSON","coordinates","profile"],"sources":["/Users/devanshgoenka/Desktop/seva/frontend/src/api/api.js"],"sourcesContent":["// src/api/api.js\nconst BASE = process.env.REACT_APP_API_BASE || \"\";\n\nasync function request(path, opts = {}) {\n  const url = `${BASE}${path}`;\n  const res = await fetch(url, {\n    headers: {\n      \"Content-Type\": \"application/json\",\n      ...opts.headers,\n    },\n    ...opts,\n  });\n  if (!res.ok) {\n    const text = await res.text().catch(()=>\"\");\n    let err = new Error(`API error ${res.status} ${res.statusText}`);\n    err.status = res.status;\n    err.body = text;\n    throw err;\n  }\n  if (res.status === 204) return null;\n  const data = await res.json().catch(()=>null);\n  return data;\n}\n\n/* AUTH */\nexport async function login({ username, password, role }) {\n  return request(`/auth/login`, {\n    method: \"POST\",\n    body: JSON.stringify({ username, password, role })\n  });\n}\nexport async function signup({ username, password, role }) {\n  return request(`/auth/signup`, {\n    method: \"POST\",\n    body: JSON.stringify({ username, password, role })\n  });\n}\n\n/* AUTHORITIES */\nexport async function getAuthorities() {\n  return request(`/authorities`);\n}\nexport async function getAuthorityById(id){\n  return request(`/authorities/${encodeURIComponent(id)}`);\n}\n\n/* REPORTS */\nexport async function getReports() {\n  return request(`/reports`);\n}\nexport async function getReport(id){\n  return request(`/reports/${encodeURIComponent(id)}`);\n}\nexport async function createReport(report) {\n  return request(`/reports`, { method: \"POST\", body: JSON.stringify(report) });\n}\nexport async function updateReport(id, patch) {\n  return request(`/reports/${encodeURIComponent(id)}`, { method: \"PATCH\", body: JSON.stringify(patch) });\n}\nexport async function deleteReport(id){\n  return request(`/reports/${encodeURIComponent(id)}`, { method: \"DELETE\" });\n}\n\n/* VOTES & COMMENTS (server endpoints) */\nexport async function voteReport(id){\n  return request(`/reports/${encodeURIComponent(id)}/vote`, { method: \"POST\" });\n}\nexport async function completeVoteReport(id){\n  return request(`/reports/${encodeURIComponent(id)}/complete-vote`, { method: \"POST\" });\n}\nexport async function commentReport(id, comment){\n  return request(`/reports/${encodeURIComponent(id)}/comment`, { method: \"POST\", body: JSON.stringify(comment) });\n}\n\n/* ADMIN: user & authority management (if backend implements) */\nexport async function getUsers(){\n  return request(`/users`);\n}\nexport async function updateUser(id, patch){\n  return request(`/users/${encodeURIComponent(id)}`, { method: \"PATCH\", body: JSON.stringify(patch) });\n}\nexport async function getOnlineUsers(){\n  return request(`/users/online`);\n}\n\n/* ORS proxy (optional) */\nexport async function getRouteGeoJSON(coordinates, profile = \"driving-car\") {\n  return request(`/ors/route`, { method: \"POST\", body: JSON.stringify({ coordinates, profile }) });\n}\n\nexport default {\n  login, signup, getAuthorities, getReports, getReport, createReport, updateReport,\n  voteReport, completeVoteReport, commentReport, getUsers, updateUser, getOnlineUsers, getRouteGeoJSON\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}