{"ast":null,"code":"import _objectSpread from\"/Users/devanshgoenka/Desktop/seva/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// src/api/api.js\nconst BASE=process.env.REACT_APP_API_BASE||\"\";async function request(path){let opts=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};const url=\"\".concat(BASE).concat(path);const res=await fetch(url,_objectSpread({headers:_objectSpread({\"Content-Type\":\"application/json\"},opts.headers)},opts));if(!res.ok){const text=await res.text().catch(()=>\"\");let err=new Error(\"API error \".concat(res.status,\" \").concat(res.statusText));err.status=res.status;err.body=text;throw err;}if(res.status===204)return null;const data=await res.json().catch(()=>null);return data;}/* AUTH */export async function login(_ref){let{username,password,role}=_ref;return request(\"/auth/login\",{method:\"POST\",body:JSON.stringify({username,password,role})});}export async function signup(_ref2){let{username,password,role}=_ref2;return request(\"/auth/signup\",{method:\"POST\",body:JSON.stringify({username,password,role})});}/* AUTHORITIES */export async function getAuthorities(){return request(\"/authorities\");}export async function getAuthorityById(id){return request(\"/authorities/\".concat(encodeURIComponent(id)));}/* REPORTS */export async function getReports(){return request(\"/reports\");}export async function getReport(id){return request(\"/reports/\".concat(encodeURIComponent(id)));}export async function createReport(report){return request(\"/reports\",{method:\"POST\",body:JSON.stringify(report)});}export async function updateReport(id,patch){return request(\"/reports/\".concat(encodeURIComponent(id)),{method:\"PATCH\",body:JSON.stringify(patch)});}export async function deleteReport(id){return request(\"/reports/\".concat(encodeURIComponent(id)),{method:\"DELETE\"});}/* VOTES & COMMENTS (server endpoints) */export async function voteReport(id){return request(\"/reports/\".concat(encodeURIComponent(id),\"/vote\"),{method:\"POST\"});}export async function completeVoteReport(id){return request(\"/reports/\".concat(encodeURIComponent(id),\"/complete-vote\"),{method:\"POST\"});}export async function commentReport(id,comment){return request(\"/reports/\".concat(encodeURIComponent(id),\"/comment\"),{method:\"POST\",body:JSON.stringify(comment)});}/* ADMIN: user & authority management (if backend implements) */export async function getUsers(){return request(\"/users\");}export async function updateUser(id,patch){return request(\"/users/\".concat(encodeURIComponent(id)),{method:\"PATCH\",body:JSON.stringify(patch)});}export async function getOnlineUsers(){return request(\"/users/online\");}/* ORS proxy (optional) */export async function getRouteGeoJSON(coordinates){let profile=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"driving-car\";return request(\"/ors/route\",{method:\"POST\",body:JSON.stringify({coordinates,profile})});}export default{login,signup,getAuthorities,getReports,getReport,createReport,updateReport,voteReport,completeVoteReport,commentReport,getUsers,updateUser,getOnlineUsers,getRouteGeoJSON};","map":{"version":3,"names":["BASE","process","env","REACT_APP_API_BASE","request","path","opts","arguments","length","undefined","url","concat","res","fetch","_objectSpread","headers","ok","text","catch","err","Error","status","statusText","body","data","json","login","_ref","username","password","role","method","JSON","stringify","signup","_ref2","getAuthorities","getAuthorityById","id","encodeURIComponent","getReports","getReport","createReport","report","updateReport","patch","deleteReport","voteReport","completeVoteReport","commentReport","comment","getUsers","updateUser","getOnlineUsers","getRouteGeoJSON","coordinates","profile"],"sources":["/Users/devanshgoenka/Desktop/seva/frontend/src/api/api.js"],"sourcesContent":["// src/api/api.js\nconst BASE = process.env.REACT_APP_API_BASE || \"\";\n\nasync function request(path, opts = {}) {\n  const url = `${BASE}${path}`;\n  const res = await fetch(url, {\n    headers: {\n      \"Content-Type\": \"application/json\",\n      ...opts.headers,\n    },\n    ...opts,\n  });\n  if (!res.ok) {\n    const text = await res.text().catch(()=>\"\");\n    let err = new Error(`API error ${res.status} ${res.statusText}`);\n    err.status = res.status;\n    err.body = text;\n    throw err;\n  }\n  if (res.status === 204) return null;\n  const data = await res.json().catch(()=>null);\n  return data;\n}\n\n/* AUTH */\nexport async function login({ username, password, role }) {\n  return request(`/auth/login`, {\n    method: \"POST\",\n    body: JSON.stringify({ username, password, role })\n  });\n}\nexport async function signup({ username, password, role }) {\n  return request(`/auth/signup`, {\n    method: \"POST\",\n    body: JSON.stringify({ username, password, role })\n  });\n}\n\n/* AUTHORITIES */\nexport async function getAuthorities() {\n  return request(`/authorities`);\n}\nexport async function getAuthorityById(id){\n  return request(`/authorities/${encodeURIComponent(id)}`);\n}\n\n/* REPORTS */\nexport async function getReports() {\n  return request(`/reports`);\n}\nexport async function getReport(id){\n  return request(`/reports/${encodeURIComponent(id)}`);\n}\nexport async function createReport(report) {\n  return request(`/reports`, { method: \"POST\", body: JSON.stringify(report) });\n}\nexport async function updateReport(id, patch) {\n  return request(`/reports/${encodeURIComponent(id)}`, { method: \"PATCH\", body: JSON.stringify(patch) });\n}\nexport async function deleteReport(id){\n  return request(`/reports/${encodeURIComponent(id)}`, { method: \"DELETE\" });\n}\n\n/* VOTES & COMMENTS (server endpoints) */\nexport async function voteReport(id){\n  return request(`/reports/${encodeURIComponent(id)}/vote`, { method: \"POST\" });\n}\nexport async function completeVoteReport(id){\n  return request(`/reports/${encodeURIComponent(id)}/complete-vote`, { method: \"POST\" });\n}\nexport async function commentReport(id, comment){\n  return request(`/reports/${encodeURIComponent(id)}/comment`, { method: \"POST\", body: JSON.stringify(comment) });\n}\n\n/* ADMIN: user & authority management (if backend implements) */\nexport async function getUsers(){\n  return request(`/users`);\n}\nexport async function updateUser(id, patch){\n  return request(`/users/${encodeURIComponent(id)}`, { method: \"PATCH\", body: JSON.stringify(patch) });\n}\nexport async function getOnlineUsers(){\n  return request(`/users/online`);\n}\n\n/* ORS proxy (optional) */\nexport async function getRouteGeoJSON(coordinates, profile = \"driving-car\") {\n  return request(`/ors/route`, { method: \"POST\", body: JSON.stringify({ coordinates, profile }) });\n}\n\nexport default {\n  login, signup, getAuthorities, getReports, getReport, createReport, updateReport,\n  voteReport, completeVoteReport, commentReport, getUsers, updateUser, getOnlineUsers, getRouteGeoJSON\n};"],"mappings":"+HAAA;AACA,KAAM,CAAAA,IAAI,CAAGC,OAAO,CAACC,GAAG,CAACC,kBAAkB,EAAI,EAAE,CAEjD,cAAe,CAAAC,OAAOA,CAACC,IAAI,CAAa,IAAX,CAAAC,IAAI,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,CAAC,CAAC,CACpC,KAAM,CAAAG,GAAG,IAAAC,MAAA,CAAMX,IAAI,EAAAW,MAAA,CAAGN,IAAI,CAAE,CAC5B,KAAM,CAAAO,GAAG,CAAG,KAAM,CAAAC,KAAK,CAACH,GAAG,CAAAI,aAAA,EACzBC,OAAO,CAAAD,aAAA,EACL,cAAc,CAAE,kBAAkB,EAC/BR,IAAI,CAACS,OAAO,CAChB,EACET,IAAI,CACR,CAAC,CACF,GAAI,CAACM,GAAG,CAACI,EAAE,CAAE,CACX,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAL,GAAG,CAACK,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,IAAI,EAAE,CAAC,CAC3C,GAAI,CAAAC,GAAG,CAAG,GAAI,CAAAC,KAAK,cAAAT,MAAA,CAAcC,GAAG,CAACS,MAAM,MAAAV,MAAA,CAAIC,GAAG,CAACU,UAAU,CAAE,CAAC,CAChEH,GAAG,CAACE,MAAM,CAAGT,GAAG,CAACS,MAAM,CACvBF,GAAG,CAACI,IAAI,CAAGN,IAAI,CACf,KAAM,CAAAE,GAAG,CACX,CACA,GAAIP,GAAG,CAACS,MAAM,GAAK,GAAG,CAAE,MAAO,KAAI,CACnC,KAAM,CAAAG,IAAI,CAAG,KAAM,CAAAZ,GAAG,CAACa,IAAI,CAAC,CAAC,CAACP,KAAK,CAAC,IAAI,IAAI,CAAC,CAC7C,MAAO,CAAAM,IAAI,CACb,CAEA,UACA,MAAO,eAAe,CAAAE,KAAKA,CAAAC,IAAA,CAA+B,IAA9B,CAAEC,QAAQ,CAAEC,QAAQ,CAAEC,IAAK,CAAC,CAAAH,IAAA,CACtD,MAAO,CAAAvB,OAAO,eAAgB,CAC5B2B,MAAM,CAAE,MAAM,CACdR,IAAI,CAAES,IAAI,CAACC,SAAS,CAAC,CAAEL,QAAQ,CAAEC,QAAQ,CAAEC,IAAK,CAAC,CACnD,CAAC,CAAC,CACJ,CACA,MAAO,eAAe,CAAAI,MAAMA,CAAAC,KAAA,CAA+B,IAA9B,CAAEP,QAAQ,CAAEC,QAAQ,CAAEC,IAAK,CAAC,CAAAK,KAAA,CACvD,MAAO,CAAA/B,OAAO,gBAAiB,CAC7B2B,MAAM,CAAE,MAAM,CACdR,IAAI,CAAES,IAAI,CAACC,SAAS,CAAC,CAAEL,QAAQ,CAAEC,QAAQ,CAAEC,IAAK,CAAC,CACnD,CAAC,CAAC,CACJ,CAEA,iBACA,MAAO,eAAe,CAAAM,cAAcA,CAAA,CAAG,CACrC,MAAO,CAAAhC,OAAO,eAAe,CAAC,CAChC,CACA,MAAO,eAAe,CAAAiC,gBAAgBA,CAACC,EAAE,CAAC,CACxC,MAAO,CAAAlC,OAAO,iBAAAO,MAAA,CAAiB4B,kBAAkB,CAACD,EAAE,CAAC,CAAE,CAAC,CAC1D,CAEA,aACA,MAAO,eAAe,CAAAE,UAAUA,CAAA,CAAG,CACjC,MAAO,CAAApC,OAAO,WAAW,CAAC,CAC5B,CACA,MAAO,eAAe,CAAAqC,SAASA,CAACH,EAAE,CAAC,CACjC,MAAO,CAAAlC,OAAO,aAAAO,MAAA,CAAa4B,kBAAkB,CAACD,EAAE,CAAC,CAAE,CAAC,CACtD,CACA,MAAO,eAAe,CAAAI,YAAYA,CAACC,MAAM,CAAE,CACzC,MAAO,CAAAvC,OAAO,YAAa,CAAE2B,MAAM,CAAE,MAAM,CAAER,IAAI,CAAES,IAAI,CAACC,SAAS,CAACU,MAAM,CAAE,CAAC,CAAC,CAC9E,CACA,MAAO,eAAe,CAAAC,YAAYA,CAACN,EAAE,CAAEO,KAAK,CAAE,CAC5C,MAAO,CAAAzC,OAAO,aAAAO,MAAA,CAAa4B,kBAAkB,CAACD,EAAE,CAAC,EAAI,CAAEP,MAAM,CAAE,OAAO,CAAER,IAAI,CAAES,IAAI,CAACC,SAAS,CAACY,KAAK,CAAE,CAAC,CAAC,CACxG,CACA,MAAO,eAAe,CAAAC,YAAYA,CAACR,EAAE,CAAC,CACpC,MAAO,CAAAlC,OAAO,aAAAO,MAAA,CAAa4B,kBAAkB,CAACD,EAAE,CAAC,EAAI,CAAEP,MAAM,CAAE,QAAS,CAAC,CAAC,CAC5E,CAEA,yCACA,MAAO,eAAe,CAAAgB,UAAUA,CAACT,EAAE,CAAC,CAClC,MAAO,CAAAlC,OAAO,aAAAO,MAAA,CAAa4B,kBAAkB,CAACD,EAAE,CAAC,UAAS,CAAEP,MAAM,CAAE,MAAO,CAAC,CAAC,CAC/E,CACA,MAAO,eAAe,CAAAiB,kBAAkBA,CAACV,EAAE,CAAC,CAC1C,MAAO,CAAAlC,OAAO,aAAAO,MAAA,CAAa4B,kBAAkB,CAACD,EAAE,CAAC,mBAAkB,CAAEP,MAAM,CAAE,MAAO,CAAC,CAAC,CACxF,CACA,MAAO,eAAe,CAAAkB,aAAaA,CAACX,EAAE,CAAEY,OAAO,CAAC,CAC9C,MAAO,CAAA9C,OAAO,aAAAO,MAAA,CAAa4B,kBAAkB,CAACD,EAAE,CAAC,aAAY,CAAEP,MAAM,CAAE,MAAM,CAAER,IAAI,CAAES,IAAI,CAACC,SAAS,CAACiB,OAAO,CAAE,CAAC,CAAC,CACjH,CAEA,gEACA,MAAO,eAAe,CAAAC,QAAQA,CAAA,CAAE,CAC9B,MAAO,CAAA/C,OAAO,SAAS,CAAC,CAC1B,CACA,MAAO,eAAe,CAAAgD,UAAUA,CAACd,EAAE,CAAEO,KAAK,CAAC,CACzC,MAAO,CAAAzC,OAAO,WAAAO,MAAA,CAAW4B,kBAAkB,CAACD,EAAE,CAAC,EAAI,CAAEP,MAAM,CAAE,OAAO,CAAER,IAAI,CAAES,IAAI,CAACC,SAAS,CAACY,KAAK,CAAE,CAAC,CAAC,CACtG,CACA,MAAO,eAAe,CAAAQ,cAAcA,CAAA,CAAE,CACpC,MAAO,CAAAjD,OAAO,gBAAgB,CAAC,CACjC,CAEA,0BACA,MAAO,eAAe,CAAAkD,eAAeA,CAACC,WAAW,CAA2B,IAAzB,CAAAC,OAAO,CAAAjD,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,aAAa,CACxE,MAAO,CAAAH,OAAO,cAAe,CAAE2B,MAAM,CAAE,MAAM,CAAER,IAAI,CAAES,IAAI,CAACC,SAAS,CAAC,CAAEsB,WAAW,CAAEC,OAAQ,CAAC,CAAE,CAAC,CAAC,CAClG,CAEA,cAAe,CACb9B,KAAK,CAAEQ,MAAM,CAAEE,cAAc,CAAEI,UAAU,CAAEC,SAAS,CAAEC,YAAY,CAAEE,YAAY,CAChFG,UAAU,CAAEC,kBAAkB,CAAEC,aAAa,CAAEE,QAAQ,CAAEC,UAAU,CAAEC,cAAc,CAAEC,eACvF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}