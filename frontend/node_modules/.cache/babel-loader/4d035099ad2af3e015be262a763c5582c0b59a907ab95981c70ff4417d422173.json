{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Routes,Route,useNavigate}from\"react-router-dom\";import Landing from\"./pages/Landing\";import Login from\"./pages/Login\";import Signup from\"./pages/Signup\";import DashboardUser from\"./components/DashboardUser\";import DashboardAdmin from\"./components/DashboardAdmin\";import DashboardAuthority from\"./components/DashboardAuthority\";import Navbar from\"./components/Navbar\";import AuthoritiesList from\"./components/AuthoritiesList\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[user,setUser]=useState(()=>{const raw=localStorage.getItem(\"seva_user\");return raw?JSON.parse(raw):null;});const navigate=useNavigate();useEffect(()=>{if(!user){// stay on landing unless logged in\n}},[user]);function handleLogin(u){setUser(u);localStorage.setItem(\"seva_user\",JSON.stringify(u));if(u.role===\"admin\")navigate(\"/admin\");else if(u.role===\"authority\")navigate(\"/authority\");else navigate(\"/user\");}function handleLogout(){const role=user===null||user===void 0?void 0:user.role;localStorage.removeItem(\"seva_user\");setUser(null);if(role===\"admin\"){alert(\"Thank you, boss\");}else{alert(\"Dhanyavad\");}navigate(\"/\");}return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsx(Navbar,{user:user,onLogout:handleLogout}),/*#__PURE__*/_jsx(\"main\",{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Landing,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{onLogin:handleLogin})}),/*#__PURE__*/_jsx(Route,{path:\"/signup\",element:/*#__PURE__*/_jsx(Signup,{onSignup:handleLogin})}),/*#__PURE__*/_jsx(Route,{path:\"/authorities\",element:/*#__PURE__*/_jsx(AuthoritiesList,{})}),/*#__PURE__*/_jsx(Route,{path:\"/user\",element:/*#__PURE__*/_jsx(DashboardUser,{user:user})}),/*#__PURE__*/_jsx(Route,{path:\"/admin\",element:/*#__PURE__*/_jsx(DashboardAdmin,{user:user})}),/*#__PURE__*/_jsx(Route,{path:\"/authority\",element:/*#__PURE__*/_jsx(DashboardAuthority,{user:user})})]})})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","Routes","Route","useNavigate","Landing","Login","Signup","DashboardUser","DashboardAdmin","DashboardAuthority","Navbar","AuthoritiesList","jsx","_jsx","jsxs","_jsxs","App","user","setUser","raw","localStorage","getItem","JSON","parse","navigate","handleLogin","u","setItem","stringify","role","handleLogout","removeItem","alert","className","children","onLogout","path","element","onLogin","onSignup"],"sources":["/Users/devanshgoenka/Desktop/seva/frontend/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Routes, Route, useNavigate } from \"react-router-dom\";\nimport Landing from \"./pages/Landing\";\nimport Login from \"./pages/Login\";\nimport Signup from \"./pages/Signup\";\nimport DashboardUser from \"./components/DashboardUser\";\nimport DashboardAdmin from \"./components/DashboardAdmin\";\nimport DashboardAuthority from \"./components/DashboardAuthority\";\nimport Navbar from \"./components/Navbar\";\nimport AuthoritiesList from \"./components/AuthoritiesList\";\n\nfunction App(){\n  const [user, setUser] = useState(() => {\n    const raw = localStorage.getItem(\"seva_user\");\n    return raw ? JSON.parse(raw) : null;\n  });\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if(!user) {\n      // stay on landing unless logged in\n    }\n  }, [user]);\n\n  function handleLogin(u) {\n    setUser(u);\n    localStorage.setItem(\"seva_user\", JSON.stringify(u));\n    if(u.role === \"admin\") navigate(\"/admin\");\n    else if(u.role === \"authority\") navigate(\"/authority\");\n    else navigate(\"/user\");\n  }\n  function handleLogout() {\n    const role = user?.role;\n    localStorage.removeItem(\"seva_user\");\n    setUser(null);\n    if(role === \"admin\"){\n      alert(\"Thank you, boss\");\n    } else {\n      alert(\"Dhanyavad\");\n    }\n    navigate(\"/\");\n  }\n\n  return (\n    <div className=\"app\">\n      <Navbar user={user} onLogout={handleLogout} />\n      <main>\n        <Routes>\n          <Route path=\"/\" element={<Landing />} />\n          <Route path=\"/login\" element={<Login onLogin={handleLogin} />} />\n          <Route path=\"/signup\" element={<Signup onSignup={handleLogin} />} />\n          <Route path=\"/authorities\" element={<AuthoritiesList />} />\n          <Route path=\"/user\" element={<DashboardUser user={user} />} />\n          <Route path=\"/admin\" element={<DashboardAdmin user={user} />} />\n          <Route path=\"/authority\" element={<DashboardAuthority user={user} />} />\n        </Routes>\n      </main>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}