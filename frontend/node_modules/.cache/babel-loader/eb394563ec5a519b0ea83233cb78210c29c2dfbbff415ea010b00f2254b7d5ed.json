{"ast":null,"code":"var _jsxFileName = \"/Users/devanshgoenka/Desktop/seva/frontend/src/components/ReportForm.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// frontend/src/components/ReportForm.jsx\nimport React, { useCallback, useState } from \"react\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { MapContainer, TileLayer, Marker, useMapEvents } from \"react-leaflet\";\nimport api from \"../api/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BettiahCenter = [26.8138, 84.5154];\nfunction ClickMap({\n  marker,\n  setMarker,\n  onMarkerPlaced,\n  draggable,\n  setMarkerFromDrag\n}) {\n  _s();\n  useMapEvents({\n    click(e) {\n      const lat = Number(parseFloat(e.latlng.lat).toFixed(6));\n      const lng = Number(parseFloat(e.latlng.lng).toFixed(6));\n      setMarker([lat, lng]);\n      if (onMarkerPlaced) onMarkerPlaced(lat, lng);\n    }\n  });\n  return null;\n}\n\n/** choose best area (POI / house/road / neighbourhood / fallback to display_name parts) */\n_s(ClickMap, \"Ld/tk8Iz8AdZhC1l7acENaOEoCo=\", false, function () {\n  return [useMapEvents];\n});\n_c = ClickMap;\nfunction buildPreciseArea(addr = {}, namedetails = {}, display_name = \"\") {\n  const poiCandidates = [namedetails === null || namedetails === void 0 ? void 0 : namedetails.name, addr === null || addr === void 0 ? void 0 : addr.attraction, addr === null || addr === void 0 ? void 0 : addr.building, addr === null || addr === void 0 ? void 0 : addr.amenity, addr === null || addr === void 0 ? void 0 : addr.shop, addr === null || addr === void 0 ? void 0 : addr.leisure, addr === null || addr === void 0 ? void 0 : addr.office, addr === null || addr === void 0 ? void 0 : addr.tourism, addr === null || addr === void 0 ? void 0 : addr.historic, addr === null || addr === void 0 ? void 0 : addr.name];\n  for (const p of poiCandidates) if (p && p.length > 2) return p;\n  if (addr.house_number && addr.road) return `${addr.house_number} ${addr.road}`;\n  if (addr.road) return addr.road;\n  const localityOrder = [\"neighbourhood\", \"suburb\", \"residential\", \"quarter\", \"locality\", \"village\", \"town\", \"city_district\", \"city\", \"county\"];\n  for (const k of localityOrder) if (addr[k]) return addr[k];\n  if (display_name) {\n    const parts = display_name.split(\",\").map(s => s.trim()).filter(Boolean);\n    return parts.slice(0, 3).join(\", \");\n  }\n  return \"\";\n}\nexport default function ReportForm({\n  onSave\n}) {\n  _s2();\n  const [title, setTitle] = useState(\"\");\n  const [desc, setDesc] = useState(\"\");\n  const [category, setCategory] = useState(\"sanitation\");\n  const [area, setArea] = useState(\"\");\n  const [pincode, setPincode] = useState(\"\");\n  const [marker, setMarker] = useState(null);\n  const [searching, setSearching] = useState(false);\n  const [resolvedAddress, setResolvedAddress] = useState(null);\n  const [alternatives, setAlternatives] = useState([]);\n  const reverseGeocode = useCallback(async (lat, lon) => {\n    setSearching(true);\n    setResolvedAddress(null);\n    setAlternatives([]);\n    try {\n      let json = null;\n      const base = process.env.REACT_APP_API_BASE || \"\";\n\n      // First: backend proxy with zoom parameter if available\n      if (base) {\n        try {\n          const url = `${base.replace(/\\/$/, \"\")}/geocode/reverse?lat=${encodeURIComponent(lat)}&lon=${encodeURIComponent(lon)}&zoom=18`;\n          const resp = await fetch(url);\n          if (resp.ok) json = await resp.json();else console.warn(\"backend geocode proxy returned\", resp.status);\n        } catch (e) {\n          console.warn(\"backend geocode proxy failed\", e);\n        }\n      }\n\n      // fallback to Nominatim reverse with namedetails, zoom\n      if (!json) {\n        const nomUrl = `https://nominatim.openstreetmap.org/reverse?format=json&lat=${encodeURIComponent(lat)}&lon=${encodeURIComponent(lon)}&addressdetails=1&namedetails=1&zoom=18`;\n        const resp = await fetch(nomUrl, {\n          headers: {\n            \"Accept-Language\": \"en\"\n          }\n        });\n        if (!resp.ok) throw new Error(`Nominatim reverse failed ${resp.status}`);\n        json = await resp.json();\n      }\n      const addr = json.address || {};\n      const nd = json.namedetails || {};\n      const display = json.display_name || \"\";\n      const best = buildPreciseArea(addr, nd, display);\n      const postal = addr.postcode || addr.postal_code || \"\";\n      if (best) setArea(best);\n      if (postal) setPincode(postal);\n      setResolvedAddress({\n        area: best || display,\n        pincode: postal || \"\",\n        display_name: display,\n        raw: json\n      });\n\n      // Build alternatives from display_name segments (allow user to pick)\n      if (display) {\n        const parts = display.split(\",\").map(s => s.trim()).filter(Boolean);\n        // produce descending specificity lists: first 1 element, 2 elements joined, etc.\n        const alt = [];\n        for (let i = 1; i <= Math.min(4, parts.length); i++) {\n          alt.push(parts.slice(0, i).join(\", \"));\n        }\n        setAlternatives([...new Set(alt)]);\n      }\n    } catch (err) {\n      console.warn(\"reverseGeocode error\", err);\n    } finally {\n      setSearching(false);\n    }\n  }, []);\n\n  // geocode by query (area or pincode)\n  const geocode = useCallback(async q => {\n    if (!q) return;\n    setSearching(true);\n    setResolvedAddress(null);\n    setAlternatives([]);\n    try {\n      const query = `${q} Bettiah`;\n      const resp = await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(query)}&limit=5&addressdetails=1&namedetails=1`);\n      if (!resp.ok) throw new Error(`HTTP ${resp.status}`);\n      const arr = await resp.json();\n      if (!arr || arr.length === 0) {\n        alert(\"No results found\");\n        setSearching(false);\n        return;\n      }\n      const first = arr[0];\n      const lat = parseFloat(first.lat);\n      const lon = parseFloat(first.lon);\n      setMarker([lat, lon]);\n      await reverseGeocode(lat, lon);\n    } catch (e) {\n      console.error(e);\n      alert(\"Geocoding failed.\");\n    } finally {\n      setSearching(false);\n    }\n  }, [reverseGeocode]);\n  async function handleSubmit(e) {\n    e.preventDefault();\n    if (!marker) {\n      alert(\"Please place a marker on the map or search area/pincode first.\");\n      return;\n    }\n    const [lat, lng] = marker;\n    const report = {\n      title,\n      desc,\n      category,\n      area,\n      pincode,\n      lat,\n      lng,\n      createdBy: localStorage.getItem(\"seva_user\") ? JSON.parse(localStorage.getItem(\"seva_user\")).username : \"anonymous\"\n    };\n    if (process.env.REACT_APP_API_BASE) {\n      try {\n        const saved = await api.createReport(report);\n        onSave(saved);\n        setTitle(\"\");\n        setDesc(\"\");\n        setArea(\"\");\n        setPincode(\"\");\n        setMarker(null);\n        setResolvedAddress(null);\n        setAlternatives([]);\n        alert(\"Report submitted to server\");\n        return;\n      } catch (err) {\n        console.warn(\"API create failed\", err);\n        alert(\"Failed to save to server, will save locally.\");\n      }\n    }\n\n    // local fallback\n    const auths = JSON.parse(localStorage.getItem('seva_authorities') || '[]');\n    let matched = auths.find(a => a.department && a.department.toLowerCase().includes(category));\n    if (!matched && auths.length > 0) matched = auths[0];\n    report.assignedTo = matched ? matched.id : null;\n    report.id = uuidv4();\n    report.votes = 0;\n    report.completedVotes = 0;\n    report.comments = [];\n    report.status = \"open\";\n    report.deadline = null;\n    report.createdAt = new Date().toISOString();\n    const arr = JSON.parse(localStorage.getItem('seva_reports') || '[]');\n    arr.unshift(report);\n    localStorage.setItem('seva_reports', JSON.stringify(arr));\n    onSave(report);\n    setTitle(\"\");\n    setDesc(\"\");\n    setArea(\"\");\n    setPincode(\"\");\n    setMarker(null);\n    setResolvedAddress(null);\n    setAlternatives([]);\n    alert(\"Report saved locally\");\n  }\n\n  // when marker is placed by click or dragend\n  async function handleMarkerPlaced(lat, lng) {\n    await reverseGeocode(lat, lng);\n  }\n\n  // marker drag: update marker coords and re-run reverse geocode\n  function DraggableMarker({\n    position,\n    onDragEnd\n  }) {\n    // use a controlled marker that updates parent marker on drag end\n    return position ? /*#__PURE__*/_jsxDEV(Marker, {\n      position: position,\n      draggable: true,\n      eventHandlers: {\n        dragend(e) {\n          const p = e.target.getLatLng();\n          const lat = Number(p.lat.toFixed(6));\n          const lng = Number(p.lng.toFixed(6));\n          setMarker([lat, lng]);\n          if (onDragEnd) onDragEnd(lat, lng);\n        }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }, this) : null;\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"report-form-wrapper\",\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"report-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Title\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        required: true,\n        value: title,\n        onChange: e => setTitle(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Description\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        required: true,\n        value: desc,\n        onChange: e => setDesc(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Category\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: category,\n        onChange: e => setCategory(e.target.value),\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"sanitation\",\n          children: \"Sanitation\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"roads\",\n          children: \"Roads / PWD\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"police\",\n          children: \"Police / Safety\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"health\",\n          children: \"Health\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"fire\",\n          children: \"Fire & Rescue\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Area / Locality\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        value: area,\n        onChange: e => setArea(e.target.value),\n        placeholder: \"Type area name and press Search\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this), resolvedAddress && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: '#f7f9fc',\n          padding: 8,\n          borderRadius: 6,\n          marginTop: 6\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"small\", {\n          style: {\n            color: '#333'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Resolved:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 43\n          }, this), \" \", resolvedAddress.area]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 90\n        }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n          style: {\n            color: '#666'\n          },\n          children: resolvedAddress.display_name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 11\n      }, this), alternatives.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 8\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"small\", {\n          children: \"Suggestions: \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: 8,\n            flexWrap: 'wrap',\n            marginTop: 6\n          },\n          children: alternatives.map((a, i) => /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn-outline\",\n            onClick: () => {\n              setArea(a);\n            },\n            children: a\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Pincode\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        value: pincode,\n        onChange: e => setPincode(e.target.value),\n        placeholder: \"e.g. 845438\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: 8,\n          marginTop: 8\n        },\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"btn-outline\",\n          onClick: () => geocode(area || pincode),\n          disabled: searching,\n          children: searching ? \"Searching...\" : \"Search area / pincode\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-row\",\n        style: {\n          marginTop: 12\n        },\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn\",\n          type: \"submit\",\n          children: \"Submit Report (marker required)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"report-map\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"map-container\",\n        style: {\n          height: 380\n        },\n        children: /*#__PURE__*/_jsxDEV(MapContainer, {\n          center: marker ? [marker[0], marker[1]] : BettiahCenter,\n          zoom: 15,\n          style: {\n            height: '100%',\n            width: '100%'\n          },\n          children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n            url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n            attribution: \"\\xA9 OpenStreetMap contributors\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ClickMap, {\n            marker: marker,\n            setMarker: setMarker,\n            onMarkerPlaced: handleMarkerPlaced\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 13\n          }, this), marker && /*#__PURE__*/_jsxDEV(DraggableMarker, {\n            position: marker,\n            onDragEnd: handleMarkerPlaced\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 24\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"muted\",\n        style: {\n          marginTop: 8\n        },\n        children: \"Click on the map to place a marker, then drag it to refine. Resolved address appears below. Submit only after confirming area/pincode.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 203,\n    columnNumber: 5\n  }, this);\n}\n_s2(ReportForm, \"PnPMoc3uW4varaoCL9klSZdhnNs=\");\n_c2 = ReportForm;\nvar _c, _c2;\n$RefreshReg$(_c, \"ClickMap\");\n$RefreshReg$(_c2, \"ReportForm\");","map":{"version":3,"names":["React","useCallback","useState","v4","uuidv4","MapContainer","TileLayer","Marker","useMapEvents","api","jsxDEV","_jsxDEV","BettiahCenter","ClickMap","marker","setMarker","onMarkerPlaced","draggable","setMarkerFromDrag","_s","click","e","lat","Number","parseFloat","latlng","toFixed","lng","_c","buildPreciseArea","addr","namedetails","display_name","poiCandidates","name","attraction","building","amenity","shop","leisure","office","tourism","historic","p","length","house_number","road","localityOrder","k","parts","split","map","s","trim","filter","Boolean","slice","join","ReportForm","onSave","_s2","title","setTitle","desc","setDesc","category","setCategory","area","setArea","pincode","setPincode","searching","setSearching","resolvedAddress","setResolvedAddress","alternatives","setAlternatives","reverseGeocode","lon","json","base","process","env","REACT_APP_API_BASE","url","replace","encodeURIComponent","resp","fetch","ok","console","warn","status","nomUrl","headers","Error","address","nd","display","best","postal","postcode","postal_code","raw","alt","i","Math","min","push","Set","err","geocode","q","query","arr","alert","first","error","handleSubmit","preventDefault","report","createdBy","localStorage","getItem","JSON","parse","username","saved","createReport","auths","matched","find","a","department","toLowerCase","includes","assignedTo","id","votes","completedVotes","comments","deadline","createdAt","Date","toISOString","unshift","setItem","stringify","handleMarkerPlaced","DraggableMarker","position","onDragEnd","eventHandlers","dragend","target","getLatLng","fileName","_jsxFileName","lineNumber","columnNumber","className","children","onSubmit","required","value","onChange","placeholder","style","background","padding","borderRadius","marginTop","color","gap","flexWrap","type","onClick","disabled","height","center","zoom","width","attribution","_c2","$RefreshReg$"],"sources":["/Users/devanshgoenka/Desktop/seva/frontend/src/components/ReportForm.jsx"],"sourcesContent":["// frontend/src/components/ReportForm.jsx\nimport React, { useCallback, useState } from \"react\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { MapContainer, TileLayer, Marker, useMapEvents } from \"react-leaflet\";\nimport api from \"../api/api\";\n\nconst BettiahCenter = [26.8138, 84.5154];\n\nfunction ClickMap({ marker, setMarker, onMarkerPlaced, draggable, setMarkerFromDrag }) {\n  useMapEvents({\n    click(e){\n      const lat = Number(parseFloat(e.latlng.lat).toFixed(6));\n      const lng = Number(parseFloat(e.latlng.lng).toFixed(6));\n      setMarker([lat, lng]);\n      if(onMarkerPlaced) onMarkerPlaced(lat, lng);\n    }\n  });\n\n  return null;\n}\n\n/** choose best area (POI / house/road / neighbourhood / fallback to display_name parts) */\nfunction buildPreciseArea(addr = {}, namedetails = {}, display_name = \"\") {\n  const poiCandidates = [\n    namedetails?.name,\n    addr?.attraction,\n    addr?.building,\n    addr?.amenity,\n    addr?.shop,\n    addr?.leisure,\n    addr?.office,\n    addr?.tourism,\n    addr?.historic,\n    addr?.name\n  ];\n  for (const p of poiCandidates) if (p && p.length > 2) return p;\n\n  if (addr.house_number && addr.road) return `${addr.house_number} ${addr.road}`;\n  if (addr.road) return addr.road;\n\n  const localityOrder = [\"neighbourhood\",\"suburb\",\"residential\",\"quarter\",\"locality\",\"village\",\"town\",\"city_district\",\"city\",\"county\"];\n  for (const k of localityOrder) if (addr[k]) return addr[k];\n\n  if (display_name) {\n    const parts = display_name.split(\",\").map(s=>s.trim()).filter(Boolean);\n    return parts.slice(0,3).join(\", \");\n  }\n  return \"\";\n}\n\nexport default function ReportForm({ onSave }){\n  const [title, setTitle] = useState(\"\");\n  const [desc, setDesc] = useState(\"\");\n  const [category, setCategory] = useState(\"sanitation\");\n  const [area, setArea] = useState(\"\");\n  const [pincode, setPincode] = useState(\"\");\n  const [marker, setMarker] = useState(null);\n  const [searching, setSearching] = useState(false);\n  const [resolvedAddress, setResolvedAddress] = useState(null);\n  const [alternatives, setAlternatives] = useState([]);\n\n  const reverseGeocode = useCallback(async (lat, lon) => {\n    setSearching(true);\n    setResolvedAddress(null);\n    setAlternatives([]);\n    try {\n      let json = null;\n      const base = process.env.REACT_APP_API_BASE || \"\";\n\n      // First: backend proxy with zoom parameter if available\n      if (base) {\n        try {\n          const url = `${base.replace(/\\/$/, \"\")}/geocode/reverse?lat=${encodeURIComponent(lat)}&lon=${encodeURIComponent(lon)}&zoom=18`;\n          const resp = await fetch(url);\n          if(resp.ok) json = await resp.json();\n          else console.warn(\"backend geocode proxy returned\", resp.status);\n        } catch(e) {\n          console.warn(\"backend geocode proxy failed\", e);\n        }\n      }\n\n      // fallback to Nominatim reverse with namedetails, zoom\n      if (!json) {\n        const nomUrl = `https://nominatim.openstreetmap.org/reverse?format=json&lat=${encodeURIComponent(lat)}&lon=${encodeURIComponent(lon)}&addressdetails=1&namedetails=1&zoom=18`;\n        const resp = await fetch(nomUrl, { headers: { \"Accept-Language\": \"en\" }});\n        if(!resp.ok) throw new Error(`Nominatim reverse failed ${resp.status}`);\n        json = await resp.json();\n      }\n\n      const addr = json.address || {};\n      const nd = json.namedetails || {};\n      const display = json.display_name || \"\";\n\n      const best = buildPreciseArea(addr, nd, display);\n      const postal = addr.postcode || addr.postal_code || \"\";\n\n      if(best) setArea(best);\n      if(postal) setPincode(postal);\n      setResolvedAddress({ area: best || display, pincode: postal || \"\", display_name: display, raw: json });\n\n      // Build alternatives from display_name segments (allow user to pick)\n      if(display) {\n        const parts = display.split(\",\").map(s=>s.trim()).filter(Boolean);\n        // produce descending specificity lists: first 1 element, 2 elements joined, etc.\n        const alt = [];\n        for(let i=1;i<=Math.min(4, parts.length); i++){\n          alt.push(parts.slice(0,i).join(\", \"));\n        }\n        setAlternatives([...new Set(alt)]);\n      }\n    } catch (err) {\n      console.warn(\"reverseGeocode error\", err);\n    } finally {\n      setSearching(false);\n    }\n  }, []);\n\n  // geocode by query (area or pincode)\n  const geocode = useCallback(async (q) => {\n    if(!q) return;\n    setSearching(true);\n    setResolvedAddress(null);\n    setAlternatives([]);\n    try {\n      const query = `${q} Bettiah`;\n      const resp = await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(query)}&limit=5&addressdetails=1&namedetails=1`);\n      if(!resp.ok) throw new Error(`HTTP ${resp.status}`);\n      const arr = await resp.json();\n      if(!arr || arr.length === 0){ alert(\"No results found\"); setSearching(false); return; }\n      const first = arr[0];\n      const lat = parseFloat(first.lat);\n      const lon = parseFloat(first.lon);\n      setMarker([lat, lon]);\n      await reverseGeocode(lat, lon);\n    } catch (e){\n      console.error(e);\n      alert(\"Geocoding failed.\");\n    } finally { setSearching(false); }\n  }, [reverseGeocode]);\n\n  async function handleSubmit(e){\n    e.preventDefault();\n    if(!marker) { alert(\"Please place a marker on the map or search area/pincode first.\"); return; }\n    const [lat, lng] = marker;\n    const report = { title, desc, category, area, pincode, lat, lng, createdBy: (localStorage.getItem(\"seva_user\") ? JSON.parse(localStorage.getItem(\"seva_user\")).username : \"anonymous\") };\n\n    if(process.env.REACT_APP_API_BASE){\n      try {\n        const saved = await api.createReport(report);\n        onSave(saved);\n        setTitle(\"\"); setDesc(\"\"); setArea(\"\"); setPincode(\"\"); setMarker(null); setResolvedAddress(null); setAlternatives([]);\n        alert(\"Report submitted to server\");\n        return;\n      } catch(err){\n        console.warn(\"API create failed\", err);\n        alert(\"Failed to save to server, will save locally.\");\n      }\n    }\n\n    // local fallback\n    const auths = JSON.parse(localStorage.getItem('seva_authorities') || '[]');\n    let matched = auths.find(a => a.department && a.department.toLowerCase().includes(category));\n    if(!matched && auths.length>0) matched = auths[0];\n    report.assignedTo = matched ? matched.id : null;\n\n    report.id = uuidv4();\n    report.votes = 0; report.completedVotes = 0; report.comments = []; report.status = \"open\"; report.deadline = null; report.createdAt = new Date().toISOString();\n\n    const arr = JSON.parse(localStorage.getItem('seva_reports') || '[]');\n    arr.unshift(report);\n    localStorage.setItem('seva_reports', JSON.stringify(arr));\n    onSave(report);\n    setTitle(\"\"); setDesc(\"\"); setArea(\"\"); setPincode(\"\"); setMarker(null); setResolvedAddress(null); setAlternatives([]);\n    alert(\"Report saved locally\");\n  }\n\n  // when marker is placed by click or dragend\n  async function handleMarkerPlaced(lat, lng){\n    await reverseGeocode(lat, lng);\n  }\n\n  // marker drag: update marker coords and re-run reverse geocode\n  function DraggableMarker({ position, onDragEnd }) {\n    // use a controlled marker that updates parent marker on drag end\n    return position ? (\n      <Marker\n        position={position}\n        draggable={true}\n        eventHandlers={{\n          dragend(e){\n            const p = e.target.getLatLng();\n            const lat = Number(p.lat.toFixed(6));\n            const lng = Number(p.lng.toFixed(6));\n            setMarker([lat, lng]);\n            if(onDragEnd) onDragEnd(lat, lng);\n          }\n        }}\n      />\n    ) : null;\n  }\n\n  return (\n    <div className=\"report-form-wrapper\">\n      <form onSubmit={handleSubmit} className=\"report-form\">\n        <label>Title</label>\n        <input required value={title} onChange={e=>setTitle(e.target.value)} />\n        <label>Description</label>\n        <textarea required value={desc} onChange={e=>setDesc(e.target.value)} />\n        <label>Category</label>\n        <select value={category} onChange={e=>setCategory(e.target.value)}>\n          <option value=\"sanitation\">Sanitation</option>\n          <option value=\"roads\">Roads / PWD</option>\n          <option value=\"police\">Police / Safety</option>\n          <option value=\"health\">Health</option>\n          <option value=\"fire\">Fire & Rescue</option>\n        </select>\n\n        <label>Area / Locality</label>\n        <input value={area} onChange={e=>setArea(e.target.value)} placeholder=\"Type area name and press Search\"/>\n        {resolvedAddress && (\n          <div style={{background:'#f7f9fc', padding:8, borderRadius:6, marginTop:6}}>\n            <small style={{color:'#333'}}><b>Resolved:</b> {resolvedAddress.area}</small><br/>\n            <small style={{color:'#666'}}>{resolvedAddress.display_name}</small>\n          </div>\n        )}\n\n        {alternatives.length > 0 && (\n          <div style={{marginTop:8}}>\n            <small>Suggestions: </small>\n            <div style={{display:'flex', gap:8, flexWrap:'wrap', marginTop:6}}>\n              {alternatives.map((a,i)=>(\n                <button key={i} type=\"button\" className=\"btn-outline\" onClick={()=>{ setArea(a); }}>{a}</button>\n              ))}\n            </div>\n          </div>\n        )}\n\n        <label>Pincode</label>\n        <input value={pincode} onChange={e=>setPincode(e.target.value)} placeholder=\"e.g. 845438\" />\n\n        <div style={{display:'flex', gap:8, marginTop:8}}>\n          <button type=\"button\" className=\"btn-outline\" onClick={()=>geocode(area || pincode)} disabled={searching}>\n            {searching ? \"Searching...\" : \"Search area / pincode\"}\n          </button>\n        </div>\n\n        <div className=\"form-row\" style={{marginTop:12}}>\n          <button className=\"btn\" type=\"submit\">Submit Report (marker required)</button>\n        </div>\n      </form>\n\n      <div className=\"report-map\">\n        <div className=\"map-container\" style={{height:380}}>\n          <MapContainer center={marker ? [marker[0], marker[1]] : BettiahCenter} zoom={15} style={{height:'100%', width:'100%'}}>\n            <TileLayer url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\" attribution=\"&copy; OpenStreetMap contributors\" />\n            <ClickMap marker={marker} setMarker={setMarker} onMarkerPlaced={handleMarkerPlaced} />\n            {/* draggable marker */}\n            {marker && <DraggableMarker position={marker} onDragEnd={handleMarkerPlaced} />}\n          </MapContainer>\n        </div>\n        <p className=\"muted\" style={{marginTop:8}}>Click on the map to place a marker, then drag it to refine. Resolved address appears below. Submit only after confirming area/pincode.</p>\n      </div>\n    </div>\n  );\n}"],"mappings":";;;AAAA;AACA,OAAOA,KAAK,IAAIC,WAAW,EAAEC,QAAQ,QAAQ,OAAO;AACpD,SAASC,EAAE,IAAIC,MAAM,QAAQ,MAAM;AACnC,SAASC,YAAY,EAAEC,SAAS,EAAEC,MAAM,EAAEC,YAAY,QAAQ,eAAe;AAC7E,OAAOC,GAAG,MAAM,YAAY;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE7B,MAAMC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO,CAAC;AAExC,SAASC,QAAQA,CAAC;EAAEC,MAAM;EAAEC,SAAS;EAAEC,cAAc;EAAEC,SAAS;EAAEC;AAAkB,CAAC,EAAE;EAAAC,EAAA;EACrFX,YAAY,CAAC;IACXY,KAAKA,CAACC,CAAC,EAAC;MACN,MAAMC,GAAG,GAAGC,MAAM,CAACC,UAAU,CAACH,CAAC,CAACI,MAAM,CAACH,GAAG,CAAC,CAACI,OAAO,CAAC,CAAC,CAAC,CAAC;MACvD,MAAMC,GAAG,GAAGJ,MAAM,CAACC,UAAU,CAACH,CAAC,CAACI,MAAM,CAACE,GAAG,CAAC,CAACD,OAAO,CAAC,CAAC,CAAC,CAAC;MACvDX,SAAS,CAAC,CAACO,GAAG,EAAEK,GAAG,CAAC,CAAC;MACrB,IAAGX,cAAc,EAAEA,cAAc,CAACM,GAAG,EAAEK,GAAG,CAAC;IAC7C;EACF,CAAC,CAAC;EAEF,OAAO,IAAI;AACb;;AAEA;AAAAR,EAAA,CAbSN,QAAQ;EAAA,QACfL,YAAY;AAAA;AAAAoB,EAAA,GADLf,QAAQ;AAcjB,SAASgB,gBAAgBA,CAACC,IAAI,GAAG,CAAC,CAAC,EAAEC,WAAW,GAAG,CAAC,CAAC,EAAEC,YAAY,GAAG,EAAE,EAAE;EACxE,MAAMC,aAAa,GAAG,CACpBF,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEG,IAAI,EACjBJ,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEK,UAAU,EAChBL,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEM,QAAQ,EACdN,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEO,OAAO,EACbP,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEQ,IAAI,EACVR,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAES,OAAO,EACbT,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEU,MAAM,EACZV,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEW,OAAO,EACbX,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEY,QAAQ,EACdZ,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEI,IAAI,CACX;EACD,KAAK,MAAMS,CAAC,IAAIV,aAAa,EAAE,IAAIU,CAAC,IAAIA,CAAC,CAACC,MAAM,GAAG,CAAC,EAAE,OAAOD,CAAC;EAE9D,IAAIb,IAAI,CAACe,YAAY,IAAIf,IAAI,CAACgB,IAAI,EAAE,OAAO,GAAGhB,IAAI,CAACe,YAAY,IAAIf,IAAI,CAACgB,IAAI,EAAE;EAC9E,IAAIhB,IAAI,CAACgB,IAAI,EAAE,OAAOhB,IAAI,CAACgB,IAAI;EAE/B,MAAMC,aAAa,GAAG,CAAC,eAAe,EAAC,QAAQ,EAAC,aAAa,EAAC,SAAS,EAAC,UAAU,EAAC,SAAS,EAAC,MAAM,EAAC,eAAe,EAAC,MAAM,EAAC,QAAQ,CAAC;EACpI,KAAK,MAAMC,CAAC,IAAID,aAAa,EAAE,IAAIjB,IAAI,CAACkB,CAAC,CAAC,EAAE,OAAOlB,IAAI,CAACkB,CAAC,CAAC;EAE1D,IAAIhB,YAAY,EAAE;IAChB,MAAMiB,KAAK,GAAGjB,YAAY,CAACkB,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAACC,CAAC,IAAEA,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC,CAACC,MAAM,CAACC,OAAO,CAAC;IACtE,OAAON,KAAK,CAACO,KAAK,CAAC,CAAC,EAAC,CAAC,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC;EACpC;EACA,OAAO,EAAE;AACX;AAEA,eAAe,SAASC,UAAUA,CAAC;EAAEC;AAAO,CAAC,EAAC;EAAAC,GAAA;EAC5C,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAG5D,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAAC6D,IAAI,EAAEC,OAAO,CAAC,GAAG9D,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAAC+D,QAAQ,EAAEC,WAAW,CAAC,GAAGhE,QAAQ,CAAC,YAAY,CAAC;EACtD,MAAM,CAACiE,IAAI,EAAEC,OAAO,CAAC,GAAGlE,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAACmE,OAAO,EAAEC,UAAU,CAAC,GAAGpE,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACY,MAAM,EAAEC,SAAS,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC;EAC1C,MAAM,CAACqE,SAAS,EAAEC,YAAY,CAAC,GAAGtE,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACuE,eAAe,EAAEC,kBAAkB,CAAC,GAAGxE,QAAQ,CAAC,IAAI,CAAC;EAC5D,MAAM,CAACyE,YAAY,EAAEC,eAAe,CAAC,GAAG1E,QAAQ,CAAC,EAAE,CAAC;EAEpD,MAAM2E,cAAc,GAAG5E,WAAW,CAAC,OAAOqB,GAAG,EAAEwD,GAAG,KAAK;IACrDN,YAAY,CAAC,IAAI,CAAC;IAClBE,kBAAkB,CAAC,IAAI,CAAC;IACxBE,eAAe,CAAC,EAAE,CAAC;IACnB,IAAI;MACF,IAAIG,IAAI,GAAG,IAAI;MACf,MAAMC,IAAI,GAAGC,OAAO,CAACC,GAAG,CAACC,kBAAkB,IAAI,EAAE;;MAEjD;MACA,IAAIH,IAAI,EAAE;QACR,IAAI;UACF,MAAMI,GAAG,GAAG,GAAGJ,IAAI,CAACK,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,wBAAwBC,kBAAkB,CAAChE,GAAG,CAAC,QAAQgE,kBAAkB,CAACR,GAAG,CAAC,UAAU;UAC9H,MAAMS,IAAI,GAAG,MAAMC,KAAK,CAACJ,GAAG,CAAC;UAC7B,IAAGG,IAAI,CAACE,EAAE,EAAEV,IAAI,GAAG,MAAMQ,IAAI,CAACR,IAAI,CAAC,CAAC,CAAC,KAChCW,OAAO,CAACC,IAAI,CAAC,gCAAgC,EAAEJ,IAAI,CAACK,MAAM,CAAC;QAClE,CAAC,CAAC,OAAMvE,CAAC,EAAE;UACTqE,OAAO,CAACC,IAAI,CAAC,8BAA8B,EAAEtE,CAAC,CAAC;QACjD;MACF;;MAEA;MACA,IAAI,CAAC0D,IAAI,EAAE;QACT,MAAMc,MAAM,GAAG,+DAA+DP,kBAAkB,CAAChE,GAAG,CAAC,QAAQgE,kBAAkB,CAACR,GAAG,CAAC,yCAAyC;QAC7K,MAAMS,IAAI,GAAG,MAAMC,KAAK,CAACK,MAAM,EAAE;UAAEC,OAAO,EAAE;YAAE,iBAAiB,EAAE;UAAK;QAAC,CAAC,CAAC;QACzE,IAAG,CAACP,IAAI,CAACE,EAAE,EAAE,MAAM,IAAIM,KAAK,CAAC,4BAA4BR,IAAI,CAACK,MAAM,EAAE,CAAC;QACvEb,IAAI,GAAG,MAAMQ,IAAI,CAACR,IAAI,CAAC,CAAC;MAC1B;MAEA,MAAMjD,IAAI,GAAGiD,IAAI,CAACiB,OAAO,IAAI,CAAC,CAAC;MAC/B,MAAMC,EAAE,GAAGlB,IAAI,CAAChD,WAAW,IAAI,CAAC,CAAC;MACjC,MAAMmE,OAAO,GAAGnB,IAAI,CAAC/C,YAAY,IAAI,EAAE;MAEvC,MAAMmE,IAAI,GAAGtE,gBAAgB,CAACC,IAAI,EAAEmE,EAAE,EAAEC,OAAO,CAAC;MAChD,MAAME,MAAM,GAAGtE,IAAI,CAACuE,QAAQ,IAAIvE,IAAI,CAACwE,WAAW,IAAI,EAAE;MAEtD,IAAGH,IAAI,EAAE/B,OAAO,CAAC+B,IAAI,CAAC;MACtB,IAAGC,MAAM,EAAE9B,UAAU,CAAC8B,MAAM,CAAC;MAC7B1B,kBAAkB,CAAC;QAAEP,IAAI,EAAEgC,IAAI,IAAID,OAAO;QAAE7B,OAAO,EAAE+B,MAAM,IAAI,EAAE;QAAEpE,YAAY,EAAEkE,OAAO;QAAEK,GAAG,EAAExB;MAAK,CAAC,CAAC;;MAEtG;MACA,IAAGmB,OAAO,EAAE;QACV,MAAMjD,KAAK,GAAGiD,OAAO,CAAChD,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAACC,CAAC,IAAEA,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC,CAACC,MAAM,CAACC,OAAO,CAAC;QACjE;QACA,MAAMiD,GAAG,GAAG,EAAE;QACd,KAAI,IAAIC,CAAC,GAAC,CAAC,EAACA,CAAC,IAAEC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE1D,KAAK,CAACL,MAAM,CAAC,EAAE6D,CAAC,EAAE,EAAC;UAC5CD,GAAG,CAACI,IAAI,CAAC3D,KAAK,CAACO,KAAK,CAAC,CAAC,EAACiD,CAAC,CAAC,CAAChD,IAAI,CAAC,IAAI,CAAC,CAAC;QACvC;QACAmB,eAAe,CAAC,CAAC,GAAG,IAAIiC,GAAG,CAACL,GAAG,CAAC,CAAC,CAAC;MACpC;IACF,CAAC,CAAC,OAAOM,GAAG,EAAE;MACZpB,OAAO,CAACC,IAAI,CAAC,sBAAsB,EAAEmB,GAAG,CAAC;IAC3C,CAAC,SAAS;MACRtC,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAMuC,OAAO,GAAG9G,WAAW,CAAC,MAAO+G,CAAC,IAAK;IACvC,IAAG,CAACA,CAAC,EAAE;IACPxC,YAAY,CAAC,IAAI,CAAC;IAClBE,kBAAkB,CAAC,IAAI,CAAC;IACxBE,eAAe,CAAC,EAAE,CAAC;IACnB,IAAI;MACF,MAAMqC,KAAK,GAAG,GAAGD,CAAC,UAAU;MAC5B,MAAMzB,IAAI,GAAG,MAAMC,KAAK,CAAC,4DAA4DF,kBAAkB,CAAC2B,KAAK,CAAC,yCAAyC,CAAC;MACxJ,IAAG,CAAC1B,IAAI,CAACE,EAAE,EAAE,MAAM,IAAIM,KAAK,CAAC,QAAQR,IAAI,CAACK,MAAM,EAAE,CAAC;MACnD,MAAMsB,GAAG,GAAG,MAAM3B,IAAI,CAACR,IAAI,CAAC,CAAC;MAC7B,IAAG,CAACmC,GAAG,IAAIA,GAAG,CAACtE,MAAM,KAAK,CAAC,EAAC;QAAEuE,KAAK,CAAC,kBAAkB,CAAC;QAAE3C,YAAY,CAAC,KAAK,CAAC;QAAE;MAAQ;MACtF,MAAM4C,KAAK,GAAGF,GAAG,CAAC,CAAC,CAAC;MACpB,MAAM5F,GAAG,GAAGE,UAAU,CAAC4F,KAAK,CAAC9F,GAAG,CAAC;MACjC,MAAMwD,GAAG,GAAGtD,UAAU,CAAC4F,KAAK,CAACtC,GAAG,CAAC;MACjC/D,SAAS,CAAC,CAACO,GAAG,EAAEwD,GAAG,CAAC,CAAC;MACrB,MAAMD,cAAc,CAACvD,GAAG,EAAEwD,GAAG,CAAC;IAChC,CAAC,CAAC,OAAOzD,CAAC,EAAC;MACTqE,OAAO,CAAC2B,KAAK,CAAChG,CAAC,CAAC;MAChB8F,KAAK,CAAC,mBAAmB,CAAC;IAC5B,CAAC,SAAS;MAAE3C,YAAY,CAAC,KAAK,CAAC;IAAE;EACnC,CAAC,EAAE,CAACK,cAAc,CAAC,CAAC;EAEpB,eAAeyC,YAAYA,CAACjG,CAAC,EAAC;IAC5BA,CAAC,CAACkG,cAAc,CAAC,CAAC;IAClB,IAAG,CAACzG,MAAM,EAAE;MAAEqG,KAAK,CAAC,gEAAgE,CAAC;MAAE;IAAQ;IAC/F,MAAM,CAAC7F,GAAG,EAAEK,GAAG,CAAC,GAAGb,MAAM;IACzB,MAAM0G,MAAM,GAAG;MAAE3D,KAAK;MAAEE,IAAI;MAAEE,QAAQ;MAAEE,IAAI;MAAEE,OAAO;MAAE/C,GAAG;MAAEK,GAAG;MAAE8F,SAAS,EAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,GAAGC,IAAI,CAACC,KAAK,CAACH,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,CAAC,CAACG,QAAQ,GAAG;IAAa,CAAC;IAExL,IAAG7C,OAAO,CAACC,GAAG,CAACC,kBAAkB,EAAC;MAChC,IAAI;QACF,MAAM4C,KAAK,GAAG,MAAMtH,GAAG,CAACuH,YAAY,CAACR,MAAM,CAAC;QAC5C7D,MAAM,CAACoE,KAAK,CAAC;QACbjE,QAAQ,CAAC,EAAE,CAAC;QAAEE,OAAO,CAAC,EAAE,CAAC;QAAEI,OAAO,CAAC,EAAE,CAAC;QAAEE,UAAU,CAAC,EAAE,CAAC;QAAEvD,SAAS,CAAC,IAAI,CAAC;QAAE2D,kBAAkB,CAAC,IAAI,CAAC;QAAEE,eAAe,CAAC,EAAE,CAAC;QACtHuC,KAAK,CAAC,4BAA4B,CAAC;QACnC;MACF,CAAC,CAAC,OAAML,GAAG,EAAC;QACVpB,OAAO,CAACC,IAAI,CAAC,mBAAmB,EAAEmB,GAAG,CAAC;QACtCK,KAAK,CAAC,8CAA8C,CAAC;MACvD;IACF;;IAEA;IACA,MAAMc,KAAK,GAAGL,IAAI,CAACC,KAAK,CAACH,YAAY,CAACC,OAAO,CAAC,kBAAkB,CAAC,IAAI,IAAI,CAAC;IAC1E,IAAIO,OAAO,GAAGD,KAAK,CAACE,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,UAAU,IAAID,CAAC,CAACC,UAAU,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACtE,QAAQ,CAAC,CAAC;IAC5F,IAAG,CAACiE,OAAO,IAAID,KAAK,CAACrF,MAAM,GAAC,CAAC,EAAEsF,OAAO,GAAGD,KAAK,CAAC,CAAC,CAAC;IACjDT,MAAM,CAACgB,UAAU,GAAGN,OAAO,GAAGA,OAAO,CAACO,EAAE,GAAG,IAAI;IAE/CjB,MAAM,CAACiB,EAAE,GAAGrI,MAAM,CAAC,CAAC;IACpBoH,MAAM,CAACkB,KAAK,GAAG,CAAC;IAAElB,MAAM,CAACmB,cAAc,GAAG,CAAC;IAAEnB,MAAM,CAACoB,QAAQ,GAAG,EAAE;IAAEpB,MAAM,CAAC5B,MAAM,GAAG,MAAM;IAAE4B,MAAM,CAACqB,QAAQ,GAAG,IAAI;IAAErB,MAAM,CAACsB,SAAS,GAAG,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;IAE9J,MAAM9B,GAAG,GAAGU,IAAI,CAACC,KAAK,CAACH,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC,IAAI,IAAI,CAAC;IACpET,GAAG,CAAC+B,OAAO,CAACzB,MAAM,CAAC;IACnBE,YAAY,CAACwB,OAAO,CAAC,cAAc,EAAEtB,IAAI,CAACuB,SAAS,CAACjC,GAAG,CAAC,CAAC;IACzDvD,MAAM,CAAC6D,MAAM,CAAC;IACd1D,QAAQ,CAAC,EAAE,CAAC;IAAEE,OAAO,CAAC,EAAE,CAAC;IAAEI,OAAO,CAAC,EAAE,CAAC;IAAEE,UAAU,CAAC,EAAE,CAAC;IAAEvD,SAAS,CAAC,IAAI,CAAC;IAAE2D,kBAAkB,CAAC,IAAI,CAAC;IAAEE,eAAe,CAAC,EAAE,CAAC;IACtHuC,KAAK,CAAC,sBAAsB,CAAC;EAC/B;;EAEA;EACA,eAAeiC,kBAAkBA,CAAC9H,GAAG,EAAEK,GAAG,EAAC;IACzC,MAAMkD,cAAc,CAACvD,GAAG,EAAEK,GAAG,CAAC;EAChC;;EAEA;EACA,SAAS0H,eAAeA,CAAC;IAAEC,QAAQ;IAAEC;EAAU,CAAC,EAAE;IAChD;IACA,OAAOD,QAAQ,gBACb3I,OAAA,CAACJ,MAAM;MACL+I,QAAQ,EAAEA,QAAS;MACnBrI,SAAS,EAAE,IAAK;MAChBuI,aAAa,EAAE;QACbC,OAAOA,CAACpI,CAAC,EAAC;UACR,MAAMsB,CAAC,GAAGtB,CAAC,CAACqI,MAAM,CAACC,SAAS,CAAC,CAAC;UAC9B,MAAMrI,GAAG,GAAGC,MAAM,CAACoB,CAAC,CAACrB,GAAG,CAACI,OAAO,CAAC,CAAC,CAAC,CAAC;UACpC,MAAMC,GAAG,GAAGJ,MAAM,CAACoB,CAAC,CAAChB,GAAG,CAACD,OAAO,CAAC,CAAC,CAAC,CAAC;UACpCX,SAAS,CAAC,CAACO,GAAG,EAAEK,GAAG,CAAC,CAAC;UACrB,IAAG4H,SAAS,EAAEA,SAAS,CAACjI,GAAG,EAAEK,GAAG,CAAC;QACnC;MACF;IAAE;MAAAiI,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,GACA,IAAI;EACV;EAEA,oBACEpJ,OAAA;IAAKqJ,SAAS,EAAC,qBAAqB;IAAAC,QAAA,gBAClCtJ,OAAA;MAAMuJ,QAAQ,EAAE5C,YAAa;MAAC0C,SAAS,EAAC,aAAa;MAAAC,QAAA,gBACnDtJ,OAAA;QAAAsJ,QAAA,EAAO;MAAK;QAAAL,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eACpBpJ,OAAA;QAAOwJ,QAAQ;QAACC,KAAK,EAAEvG,KAAM;QAACwG,QAAQ,EAAEhJ,CAAC,IAAEyC,QAAQ,CAACzC,CAAC,CAACqI,MAAM,CAACU,KAAK;MAAE;QAAAR,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eACvEpJ,OAAA;QAAAsJ,QAAA,EAAO;MAAW;QAAAL,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eAC1BpJ,OAAA;QAAUwJ,QAAQ;QAACC,KAAK,EAAErG,IAAK;QAACsG,QAAQ,EAAEhJ,CAAC,IAAE2C,OAAO,CAAC3C,CAAC,CAACqI,MAAM,CAACU,KAAK;MAAE;QAAAR,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eACxEpJ,OAAA;QAAAsJ,QAAA,EAAO;MAAQ;QAAAL,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eACvBpJ,OAAA;QAAQyJ,KAAK,EAAEnG,QAAS;QAACoG,QAAQ,EAAEhJ,CAAC,IAAE6C,WAAW,CAAC7C,CAAC,CAACqI,MAAM,CAACU,KAAK,CAAE;QAAAH,QAAA,gBAChEtJ,OAAA;UAAQyJ,KAAK,EAAC,YAAY;UAAAH,QAAA,EAAC;QAAU;UAAAL,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eAC9CpJ,OAAA;UAAQyJ,KAAK,EAAC,OAAO;UAAAH,QAAA,EAAC;QAAW;UAAAL,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eAC1CpJ,OAAA;UAAQyJ,KAAK,EAAC,QAAQ;UAAAH,QAAA,EAAC;QAAe;UAAAL,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eAC/CpJ,OAAA;UAAQyJ,KAAK,EAAC,QAAQ;UAAAH,QAAA,EAAC;QAAM;UAAAL,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACtCpJ,OAAA;UAAQyJ,KAAK,EAAC,MAAM;UAAAH,QAAA,EAAC;QAAa;UAAAL,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACrC,CAAC,eAETpJ,OAAA;QAAAsJ,QAAA,EAAO;MAAe;QAAAL,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eAC9BpJ,OAAA;QAAOyJ,KAAK,EAAEjG,IAAK;QAACkG,QAAQ,EAAEhJ,CAAC,IAAE+C,OAAO,CAAC/C,CAAC,CAACqI,MAAM,CAACU,KAAK,CAAE;QAACE,WAAW,EAAC;MAAiC;QAAAV,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAC,CAAC,EACxGtF,eAAe,iBACd9D,OAAA;QAAK4J,KAAK,EAAE;UAACC,UAAU,EAAC,SAAS;UAAEC,OAAO,EAAC,CAAC;UAAEC,YAAY,EAAC,CAAC;UAAEC,SAAS,EAAC;QAAC,CAAE;QAAAV,QAAA,gBACzEtJ,OAAA;UAAO4J,KAAK,EAAE;YAACK,KAAK,EAAC;UAAM,CAAE;UAAAX,QAAA,gBAACtJ,OAAA;YAAAsJ,QAAA,EAAG;UAAS;YAAAL,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC,KAAC,EAACtF,eAAe,CAACN,IAAI;QAAA;UAAAyF,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eAAApJ,OAAA;UAAAiJ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAClFpJ,OAAA;UAAO4J,KAAK,EAAE;YAACK,KAAK,EAAC;UAAM,CAAE;UAAAX,QAAA,EAAExF,eAAe,CAACzC;QAAY;UAAA4H,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACjE,CACN,EAEApF,YAAY,CAAC/B,MAAM,GAAG,CAAC,iBACtBjC,OAAA;QAAK4J,KAAK,EAAE;UAACI,SAAS,EAAC;QAAC,CAAE;QAAAV,QAAA,gBACxBtJ,OAAA;UAAAsJ,QAAA,EAAO;QAAa;UAAAL,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eAC5BpJ,OAAA;UAAK4J,KAAK,EAAE;YAACrE,OAAO,EAAC,MAAM;YAAE2E,GAAG,EAAC,CAAC;YAAEC,QAAQ,EAAC,MAAM;YAAEH,SAAS,EAAC;UAAC,CAAE;UAAAV,QAAA,EAC/DtF,YAAY,CAACxB,GAAG,CAAC,CAACiF,CAAC,EAAC3B,CAAC,kBACpB9F,OAAA;YAAgBoK,IAAI,EAAC,QAAQ;YAACf,SAAS,EAAC,aAAa;YAACgB,OAAO,EAAEA,CAAA,KAAI;cAAE5G,OAAO,CAACgE,CAAC,CAAC;YAAE,CAAE;YAAA6B,QAAA,EAAE7B;UAAC,GAAzE3B,CAAC;YAAAmD,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAiF,CAChG;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CACN,eAEDpJ,OAAA;QAAAsJ,QAAA,EAAO;MAAO;QAAAL,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eACtBpJ,OAAA;QAAOyJ,KAAK,EAAE/F,OAAQ;QAACgG,QAAQ,EAAEhJ,CAAC,IAAEiD,UAAU,CAACjD,CAAC,CAACqI,MAAM,CAACU,KAAK,CAAE;QAACE,WAAW,EAAC;MAAa;QAAAV,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAE5FpJ,OAAA;QAAK4J,KAAK,EAAE;UAACrE,OAAO,EAAC,MAAM;UAAE2E,GAAG,EAAC,CAAC;UAAEF,SAAS,EAAC;QAAC,CAAE;QAAAV,QAAA,eAC/CtJ,OAAA;UAAQoK,IAAI,EAAC,QAAQ;UAACf,SAAS,EAAC,aAAa;UAACgB,OAAO,EAAEA,CAAA,KAAIjE,OAAO,CAAC5C,IAAI,IAAIE,OAAO,CAAE;UAAC4G,QAAQ,EAAE1G,SAAU;UAAA0F,QAAA,EACtG1F,SAAS,GAAG,cAAc,GAAG;QAAuB;UAAAqF,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC/C;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC,eAENpJ,OAAA;QAAKqJ,SAAS,EAAC,UAAU;QAACO,KAAK,EAAE;UAACI,SAAS,EAAC;QAAE,CAAE;QAAAV,QAAA,eAC9CtJ,OAAA;UAAQqJ,SAAS,EAAC,KAAK;UAACe,IAAI,EAAC,QAAQ;UAAAd,QAAA,EAAC;QAA+B;UAAAL,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC3E,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACF,CAAC,eAEPpJ,OAAA;MAAKqJ,SAAS,EAAC,YAAY;MAAAC,QAAA,gBACzBtJ,OAAA;QAAKqJ,SAAS,EAAC,eAAe;QAACO,KAAK,EAAE;UAACW,MAAM,EAAC;QAAG,CAAE;QAAAjB,QAAA,eACjDtJ,OAAA,CAACN,YAAY;UAAC8K,MAAM,EAAErK,MAAM,GAAG,CAACA,MAAM,CAAC,CAAC,CAAC,EAAEA,MAAM,CAAC,CAAC,CAAC,CAAC,GAAGF,aAAc;UAACwK,IAAI,EAAE,EAAG;UAACb,KAAK,EAAE;YAACW,MAAM,EAAC,MAAM;YAAEG,KAAK,EAAC;UAAM,CAAE;UAAApB,QAAA,gBACpHtJ,OAAA,CAACL,SAAS;YAAC8E,GAAG,EAAC,oDAAoD;YAACkG,WAAW,EAAC;UAAmC;YAAA1B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eACtHpJ,OAAA,CAACE,QAAQ;YAACC,MAAM,EAAEA,MAAO;YAACC,SAAS,EAAEA,SAAU;YAACC,cAAc,EAAEoI;UAAmB;YAAAQ,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,EAErFjJ,MAAM,iBAAIH,OAAA,CAAC0I,eAAe;YAACC,QAAQ,EAAExI,MAAO;YAACyI,SAAS,EAAEH;UAAmB;YAAAQ,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACnE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACZ,CAAC,eACNpJ,OAAA;QAAGqJ,SAAS,EAAC,OAAO;QAACO,KAAK,EAAE;UAACI,SAAS,EAAC;QAAC,CAAE;QAAAV,QAAA,EAAC;MAAsI;QAAAL,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAClL,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAACnG,GAAA,CAtNuBF,UAAU;AAAA6H,GAAA,GAAV7H,UAAU;AAAA,IAAA9B,EAAA,EAAA2J,GAAA;AAAAC,YAAA,CAAA5J,EAAA;AAAA4J,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}